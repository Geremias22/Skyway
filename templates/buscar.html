{% extends "layout.html" %}

{% block title %}Buscar - Skyway{% endblock %}

{% block content %}
<div class="content_busqueda">
    <h1>Planea tu próximo viaje con una sencilla búsqueda.</h1>
    <div class="search-container">    
        <form class="search-form" id="searchForm" method="POST" action="/buscar">
            <div class="form-group">
                <label for="origen">Desde</label>
                <input type="text" id="origen" name="origen" placeholder="Ciudad o aeropuerto de origen" required>
            </div>
            <div class="form-group">
                <label for="destino">Hacia</label>
                <input type="text" id="destino" name="destino" placeholder="Ciudad o aeropuerto de destino" required>
            </div>
            <div class="form-group">
                <label for="fecha">Fecha</label>
                <input type="date" id="fecha" name="fecha" required>
            </div>
            <div class="form-group">
                <label for="dias">Duración (días)</label>
                <input type="number" id="dias" name="dias" min="1" placeholder="Número de días" required>
            </div>
            <div class="form-group">
                <label for="personas">Número de personas</label>
                <input type="number" id="personas" name="personas" min="1" placeholder="Cantidad de personas" required>
            </div>
            <button type="submit">Buscar</button>
        </form>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    document.getElementById('searchForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const formData = new FormData(this);

        const query = new URLSearchParams({
            origen: formData.get('origen'),
            destino: formData.get('destino'),
            fecha: formData.get('fecha'),
            dias: formData.get('dias'),
            personas: formData.get('personas')
        });
        

        window.location.href = `/dashboard?${query.toString()}`;
    });
</script>
{% endblock %}
